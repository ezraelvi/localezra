<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Global Security Dashboard</title>
<link rel="icon" type="image/png" href="/imgvidaud/dashboardicon.png">

<!-- Three.js for 3D Earth -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>

<!-- Leaflet CSS and JS for map -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
    :root {
        --primary: #6c5ce7;
        --secondary: #00cec9;
        --accent: #fd79a8;
        --dark: #2d3436;
        --light: #f5f6fa;
        --glow: 0 0 15px rgba(108, 92, 231, 0.7);
    }
    
    body {
        margin: 0; 
        padding: 0;
        overflow: hidden;
        background-color: var(--dark);
        color: var(--light);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    #earth-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.9;
    }
    
    #content {
        position: relative;
        z-index: 1;
        min-height: 100vh;
        display: grid;
        grid-template-rows: auto 1fr auto;
        grid-template-columns: 250px 1fr;
        grid-template-areas: 
            "header header"
            "sidebar main"
            "sidebar footer";
    }
    
    header {
        grid-area: header;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        padding: 1rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--glow);
    }
    
    .logo {
        font-size: 1.8rem;
        font-weight: bold;
        background: linear-gradient(to right, #fff, #c9d6ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: var(--accent);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
    }
    
    aside {
        grid-area: sidebar;
        background: rgba(45, 52, 54, 0.8);
        backdrop-filter: blur(10px);
        padding: 1.5rem;
        border-right: 1px solid rgba(255,255,255,0.1);
    }
    
    .nav-menu {
        list-style: none;
        padding: 0;
        margin-top: 2rem;
    }
    
    .nav-item {
        margin-bottom: 1rem;
    }
    
    .nav-link {
        color: var(--light);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 0.8rem;
        border-radius: 8px;
        transition: all 0.3s ease;
    }
    
    .nav-link:hover, .nav-link.active {
        background: var(--primary);
        box-shadow: var(--glow);
    }
    
    main {
        grid-area: main;
        padding: 2rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        align-content: start;
    }
    
    .card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(5px);
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
    }
    
    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .card-title {
        margin: 0;
        color: var(--secondary);
        font-size: 1.2rem;
    }
    
    .card-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(45deg, var(--primary), var(--accent));
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    #map {
        width: 100%;
        height: 250px;
        border-radius: 8px;
        overflow: hidden;
        margin-top: 1rem;
    }
    
    .location-info {
        margin-top: 10px;
        font-size: 0.9rem;
        color: var(--secondary);
    }
    
    .sosmed-list {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    .sosmed-btn {
        background: linear-gradient(45deg, var(--primary), var(--accent));
        color: white;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s ease;
    }
    
    .sosmed-btn:hover {
        transform: scale(1.05);
        box-shadow: var(--glow);
    }
    
    .support-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    .support-form textarea {
        resize: vertical;
        min-height: 100px;
        padding: 0.8rem;
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.2);
        background: rgba(255,255,255,0.1);
        color: white;
        font-family: inherit;
    }
    
    .support-form button {
        background: linear-gradient(45deg, var(--primary), var(--secondary));
        color: white;
        border: none;
        padding: 0.8rem;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .support-form button:hover {
        box-shadow: var(--glow);
    }
    
    footer {
        grid-area: footer;
        padding: 1rem 2rem;
        text-align: center;
        font-size: 0.8rem;
        color: rgba(255,255,255,0.6);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        #content {
            grid-template-rows: auto auto 1fr auto;
            grid-template-columns: 1fr;
            grid-template-areas: 
                "header"
                "sidebar"
                "main"
                "footer";
        }
        
        aside {
            border-right: none;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .nav-menu {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-top: 1rem;
            padding-bottom: 10px;
        }
        
        .nav-item {
            margin-bottom: 0;
        }
        
        .nav-link span {
            display: none;
        }
    }
</style>
</head>
<body>
    <!-- 3D Earth Container -->
    <div id="earth-container"></div>
    
    <div id="content">
        <header>
            <div class="logo">GLOBAL SECURITY</div>
            <div class="user-info">
                <div class="user-avatar">EZ</div>
                <span>EzraVVV</span>
            </div>
        </header>
        
        <aside>
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active">
                            <span>üåê</span>
                            <span>Global Map</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span>üìä</span>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span>üîí</span>
                            <span>Security</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span>‚öôÔ∏è</span>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        
        <main>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Live Location Tracking</h3>
                    <div class="card-icon">üìç</div>
                </div>
                <div id="map"></div>
                <div id="locationInfo" class="location-info">Acquiring your location...</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Quick Actions</h3>
                    <div class="card-icon">üöÄ</div>
                </div>
                <div class="sosmed-list">
                    <button class="sosmed-btn" onclick="window.open('https://instagram.com/ezravvv', '_blank')">
                        <span>üì∏</span>
                        <span>Instagram</span>
                    </button>
                    <button class="sosmed-btn" onclick="window.open('https://wa.me/6281434046148', '_blank')">
                        <span>üí¨</span>
                        <span>WhatsApp</span>
                    </button>
                    <button class="sosmed-btn" onclick="handleFacebookClick()">
                        <span>üëç</span>
                        <span>Facebook</span>
                    </button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Contact Support</h3>
                    <div class="card-icon">‚úâÔ∏è</div>
                </div>
                <form class="support-form" id="supportForm">
                    <textarea id="supportText" placeholder="Write your message here..."></textarea>
                    <button type="submit">Send Message</button>
                </form>
                <div id="supportMsg"></div>
            </div>
        </main>
        
        <footer>
            &copy; 2023 Global Security Dashboard | Designed by EzraVVV
        </footer>
    </div>

<script>
    // Enhanced 3D Earth with better colors
    let scene, camera, renderer, earth, controls;
    
    function init3DEarth() {
        // Scene setup with colorful fog
        scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000814, 0.1);
        
        // Camera setup
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 2.5;
        
        // Enhanced renderer
        renderer = new THREE.WebGLRenderer({ 
            antialias: true, 
            alpha: true,
            powerPreference: "high-performance"
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.getElementById('earth-container').appendChild(renderer.domElement);
        
        // Smooth controls
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableZoom = false;
        controls.enablePan = false;
        controls.rotateSpeed = 0.3;
        controls.minDistance = 2;
        controls.maxDistance = 2;
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        
        // Earth geometry
        const geometry = new THREE.SphereGeometry(1, 64, 64);
        
        // High-quality Earth textures
        const textureLoader = new THREE.TextureLoader();
        const earthTexture = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_atmos_2048.jpg');
        const bumpMap = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_normal_2048.jpg');
        const specularMap = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_specular_2048.jpg');
        
        // Enhanced Earth material
        const material = new THREE.MeshPhongMaterial({
            map: earthTexture,
            bumpMap: bumpMap,
            bumpScale: 0.1,
            specularMap: specularMap,
            specular: new THREE.Color(0x333333),
            shininess: 10,
            transparent: true,
            opacity: 0.95
        });
        
        // Create Earth mesh
        earth = new THREE.Mesh(geometry, material);
        scene.add(earth);
        
        // Improved lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 2);
        scene.add(ambientLight);
        
        const directionalLight1 = new THREE.DirectionalLight(0xffffff, 1.5);
        directionalLight1.position.set(5, 3, 5);
        scene.add(directionalLight1);
        
        const directionalLight2 = new THREE.DirectionalLight(0x00a8ff, 0.5);
        directionalLight2.position.set(-3, -1, -2);
        scene.add(directionalLight2);
        
        // Colorful stars
        addColorfulStars();
        
        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            earth.rotation.y += 0.0005;
            controls.update();
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    }
    
    function addColorfulStars() {
        const starsGeometry = new THREE.BufferGeometry();
        const starsMaterial = new THREE.PointsMaterial({
            size: 0.1,
            transparent: true,
            opacity: 0.8,
            vertexColors: true
        });
        
        const starsVertices = [];
        const starsColors = [];
        const starColors = [0x00cec9, 0xfd79a8, 0xfdcb6e, 0x6c5ce7, 0xffffff];
        
        for (let i = 0; i < 5000; i++) {
            const x = (Math.random() - 0.5) * 2000;
            const y = (Math.random() - 0.5) * 2000;
            const z = (Math.random() - 0.5) * 2000;
            starsVertices.push(x, y, z);
            
            const color = starColors[Math.floor(Math.random() * starColors.length)];
            const r = ((color >> 16) & 255) / 255;
            const g = ((color >> 8) & 255) / 255;
            const b = (color & 255) / 255;
            starsColors.push(r, g, b);
        }
        
        starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
        starsGeometry.setAttribute('color', new THREE.Float32BufferAttribute(starsColors, 3));
        
        const stars = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(stars);
    }
    
    // Initialize 3D Earth
    init3DEarth();
    
    // Geolocation with Leaflet Map
    const mapDiv = document.getElementById('map');
    const locationInfo = document.getElementById('locationInfo');
    let map, marker;
    
    function initMap(lat, lon) {
        if (!map) {
            map = L.map('map').setView([lat, lon], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);
            
            // Custom colorful marker
            const colorfulIcon = new L.Icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',
                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            });
            
            marker = L.marker([lat, lon], {icon: colorfulIcon}).addTo(map);
            
            // Add accuracy circle
            L.circle([lat, lon], {
                color: '#6c5ce7',
                fillColor: '#6c5ce7',
                fillOpacity: 0.2,
                radius: 100
            }).addTo(map);
            
            // Get address
            reverseGeocode(lat, lon);
        } else {
            map.setView([lat, lon], 13);
            marker.setLatLng([lat, lon]);
        }
    }
    
    function reverseGeocode(lat, lon) {
        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
            .then(response => response.json())
            .then(data => {
                let address = "üìç ";
                
                if (data.address) {
                    if (data.address.road) address += data.address.road + ', ';
                    if (data.address.city) address += data.address.city + ', ';
                    if (data.address.country) address += data.address.country;
                    
                    address = address.replace(/, $/, '');
                } else {
                    address += `${lat.toFixed(4)}, ${lon.toFixed(4)}`;
                }
                
                locationInfo.textContent = address;
                marker.bindPopup(address).openPopup();
            })
            .catch(error => {
                console.error('Geocoding error:', error);
                locationInfo.textContent = `üìç Coordinates: ${lat.toFixed(4)}, ${lon.toFixed(4)}`;
                marker.bindPopup(`Your location`).openPopup();
            });
    }
    
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                position => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    initMap(lat, lon);
                },
                error => {
                    console.error('Geolocation error:', error);
                    locationInfo.textContent = "üìç Location access denied. Using default location.";
                    initMap(-6.2088, 106.8456); // Jakarta
                }
            );
            
            // Watch position changes
            navigator.geolocation.watchPosition(
                position => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    if (marker) {
                        marker.setLatLng([lat, lon]);
                        map.setView([lat, lon]);
                        reverseGeocode(lat, lon);
                    }
                }
            );
        } else {
            locationInfo.textContent = "üìç Geolocation not supported. Using default location.";
            initMap(-6.2088, 106.8456); // Jakarta
        }
    }
    
    // Initialize location tracking
    getLocation();
    
    // Social media functions
    function handleFacebookClick() {
        alert('Facebook profile not available');
    }
    
    // Support form handling
    const supportForm = document.getElementById('supportForm');
    const supportMsg = document.getElementById('supportMsg');
    
    supportForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const text = document.getElementById('supportText').value.trim();
        
        if (text.length === 0) {
            supportMsg.textContent = "Please write a message before sending.";
            supportMsg.style.color = "#fd79a8";
            return;
        }
        
        supportMsg.textContent = "Sending message...";
        supportMsg.style.color = "#00cec9";
        
        // Simulate sending
        setTimeout(() => {
            supportMsg.textContent = "Message sent successfully!";
            supportForm.reset();
        }, 1500);
    });
</script>
</body>
</html>
