<!DOCTYPE html>
<html>
<head>
  <title>LOCAL LIFE SECURE VAULT</title>
  <link rel="icon" type="image/png"  href="/whoareyou/indexicon.png">
  <style>
    /* üé® WARNA KHUSUS UNTUKMU */
    :root {
      --glow: #00ff88;
      --dark: #0a0a12;
      --error: #ff0033;
      --scan-speed: 3s;
    }

    /* üñ•Ô∏è TAMPILAN UTAMA */
    body {
      background: radial-gradient(circle at center, #0a0a20, #000000);
      height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Courier New', monospace;
      color: var(--glow);
      overflow: hidden;
    }

    .vault {
      width: 320px;
      height: 420px;
      background: rgba(10,10,20,0.9);
      border-radius: 16px;
      border: 1px solid var(--glow);
      box-shadow: 
        0 0 30px rgba(0,255,136,0.2),
        inset 0 0 20px rgba(0,255,136,0.1);
      position: relative;
      overflow: hidden;
    }

    /* üñêÔ∏è FINGERPRINT SCANNER */
    .fingerprint {
      width: 160px;
      height: 200px;
      margin: 30px auto;
      background: 
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 120"><path d="M15,20 Q50,0 85,20 Q95,40 85,60 Q75,80 50,90 Q25,80 15,60 Q5,40 15,20" fill="none" stroke="%2300ff88" stroke-width="0.5" stroke-dasharray="2,1"/></svg>') center/contain no-repeat;
      position: relative;
      filter: drop-shadow(0 0 5px var(--glow));
    }

    .ridges {
      position: absolute;
      width: 100%;
      height: 100%;
      background: 
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 120"><path d="M10,15 Q50,-5 90,15 Q100,35 90,55 Q80,75 50,85 Q20,75 10,55 Q0,35 10,15" fill="none" stroke="%2300ff8833" stroke-width="0.3"/></svg>') center/contain no-repeat;
    }

    .scan-line {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(to bottom, transparent, var(--glow), transparent);
      animation: scan var(--scan-speed) linear infinite;
      opacity: 0;
    }

    /* üö® DARURAT MODE */
    .under-attack {
      animation: attack-pulse 0.8s infinite;
    }

    /* üìü STATUS & KODE */
    .status {
      text-align: center;
      margin-top: 20px;
      height: 20px;
      font-size: 14px;
      text-shadow: 0 0 5px var(--glow);
    }

    .code-display {
      position: absolute;
      bottom: 70px;
      width: 90%;
      left: 5%;
      height: 60px;
      background: rgba(0,0,0,0.5);
      border: 1px dashed var(--glow);
      font-size: 10px;
      padding: 5px;
      overflow: hidden;
      display: none;
    }

    .auth-btn:hover {
      box-shadow: 0 0 15px var(--glow);
      letter-spacing: 1px;
    }

    /* ‚ú® ANIMASI KHUSUS */
    @keyframes scan {
      0% { top: 0; opacity: 0; }
      5% { opacity: 1; }
      95% { opacity: 1; }
      100% { top: 100%; opacity: 0; }
    }

    @keyframes attack-pulse {
      0%, 100% { box-shadow: 0 0 10px var(--error); }
      50% { box-shadow: 0 0 30px var(--error); }
    }

    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(-2px, -2px); }
      60% { transform: translate(2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0); }
    }
    .ip-display {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 12px;
      color: rgba(0,255,136,0.7);
    }
    .bypass-btn {
      background: transparent;
      border: none;
      color: #FFFF00;
      cursor: pointer;
      position: absolute;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      display: none;
    }
  </style>
</head>
<body>
  <div class="vault" id="vault">
    <div class="fingerprint" id="scanner">
      <div class="ridges"></div>
      <div class="scan-line" id="scanLine"></div>
    </div>
    
    <div class="status" id="status">FINGERPRINT</div>
    
    <div class="code-display" id="codeDisplay"></div>
    
  </div>
   <button class="bypass-btn" id="bypassBtn" style="display:none">
      VISITING
   </button>
  </div>
    <div class="ip-display" id="ipDisplay">
    Your IP: Loading...
  </div>

<script>
    // ======================
    // üß© MAIN CONFIGURATION
    // ======================
    const config = {
      maxAttempts: 3,
      lockDuration: 1000,
      scanDuration: 3000,
      pressDuration: 300, // Time needed to hold for scan (ms)
      secretCode: "LOCALLIFE",
      attemptCookieExpiry: 10 // minutes
    };

    // ======================
    // üéõÔ∏è SYSTEM INITIALIZATION
    // ======================
    const vault = document.getElementById('vault');
    const scanner = document.getElementById('scanner');
    const scanLine = document.getElementById('scanLine');
    const status = document.getElementById('status');
    const bypassBtn = document.getElementById('bypassBtn');
    const codeDisplay = document.getElementById('codeDisplay');
    const ipDisplay = document.getElementById('ipDisplay');

    let isScanning = false;
    let isLocked = false;
    let audioCtx;
    let pressTimer;

    // ======================
    // üç™ COOKIE MANAGEMENT
    // ======================
    function setCookie(name, value, minutes) {
        const date = new Date();
        date.setTime(date.getTime() + (minutes * 60 * 1000));
        document.cookie = `${name}=${value};expires=${date.toUTCString()};path=/`;
    }

    function getCookie(name) {
        const cookies = document.cookie.split(';');
        for (let cookie of cookies) {
            const [cookieName, cookieValue] = cookie.trim().split('=');
            if (cookieName === name) return cookieValue;
        }
        return null;
    }

    function deleteCookie(name) {
        document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`;
    }

    // ======================
    // üîÑ ATTEMPT MANAGEMENT
    // ======================
    function getAttemptCount() {
        const attempts = getCookie('login_attempts');
        return attempts ? parseInt(attempts) : 0;
    }

    function updateAttemptCount() {
        const newCount = getAttemptCount() + 1;
        setCookie('login_attempts', newCount, config.attemptCookieExpiry);
        return newCount;
    }

    function resetAttempts() {
        deleteCookie('login_attempts');
    }

    // ======================
    // üîä AUDIO SYSTEM
    // ======================
    function initAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    function playBeep(freq, dur, type='sine') {
      initAudio();
      
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      
      osc.type = type;
      osc.frequency.value = freq;
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      
      gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
      osc.start();
      gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
      osc.stop(audioCtx.currentTime + dur);
    }

    // ======================
    // üñêÔ∏è TOUCH/PRESS HANDLING
    // ======================
    scanner.addEventListener('mousedown', handlePressStart);
    scanner.addEventListener('touchstart', handlePressStart);
    
    scanner.addEventListener('mouseup', handlePressEnd);
    scanner.addEventListener('mouseleave', handlePressEnd);
    scanner.addEventListener('touchend', handlePressEnd);

    function handlePressStart(e) {
        if (isScanning || isLocked) return;
        if (e.type === 'touchstart') e.preventDefault();
        
        pressTimer = setTimeout(() => {
            startScan();
        }, config.pressDuration);
    }

    function handlePressEnd() {
        clearTimeout(pressTimer);
        if (!isScanning) {
            scanLine.style.opacity = "0";
        }
    }

    // ======================
    // üîí AUTHENTICATION PROCESS
    // ======================
    function startScan() {
      isScanning = true;
      status.textContent = "SCANNING...";
      scanLine.style.opacity = "1";
      playBeep(800, 0.3);
      
      scanner.addEventListener('mousemove', highlightRidges);
      setTimeout(finishScan, config.scanDuration);
    }

    function highlightRidges(e) {
      const rect = scanner.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      scanner.style.background = 
        `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 120"><path d="M15,20 Q50,0 85,20 Q95,40 85,60 Q75,80 50,90 Q25,80 15,60 Q5,40 15,20" fill="none" stroke="%2300ff88" stroke-width="0.5" stroke-dasharray="2,1"/></svg>') center/contain no-repeat, 
        radial-gradient(circle at ${x}px ${y}px, rgba(0,255,136,0.3) 0%, transparent 70%)`;
    }

    function finishScan() {
      isScanning = false;
      scanLine.style.opacity = "0";
      scanner.removeEventListener('mousemove', highlightRidges);
      
      const attemptCount = updateAttemptCount();
      
      if (attemptCount >= config.maxAttempts) {
        triggerLockdown();
      } else {
        status.textContent = `SCAN FAILED (${attemptCount}/${config.maxAttempts})`;
        playBeep(400, 0.2);
        bypassBtn.style.display = 'block';
        setTimeout(() => status.textContent = "READY FOR SCAN", 1500);
      }
    }

    // ======================
    // üö® LOCKDOWN SYSTEM
    // ======================
    function triggerLockdown() {
      isLocked = true;
      status.textContent = "SECURITY LOCKDOWN";
      vault.classList.add('under-attack');
      
      setCookie('blocked', 'true', 1);
      resetAttempts();
      
      playBeep(200, 0.2, 'square');
      setTimeout(() => playBeep(150, 0.3, 'square'), 100);
      setTimeout(() => playBeep(100, 0.4, 'square'), 200);
      
      showEncryptionCode();
      setTimeout(() => window.location.href = 'whoareyou/index.html', 1000);
    }

    function showEncryptionCode() {
      codeDisplay.style.display = "block";
      codeDisplay.innerHTML = 
        `<span style="color:#ff5555">// ENCRYPTION ACTIVATED</span>\n` +
        `<span style="color:#00ff88">void</span> secure_decrypt() {\n` +
        `  <span style="color:#00ff88">if</span> (auth_attempts >= ${config.maxAttempts}) {\n` +
        `    <span style="color:#ff5555">firewall</span>(0x${Math.random().toString(16).slice(2,10)});\n` +
        `    <span style="color:#00ff88">return</span> <span style="color:#ff5555">LOCKDOWN</span>;\n` +
        `  }\n` +
        `}`;
    }

    // ======================
    // üéÆ SPECIAL FEATURES
    // ======================
    let keyBuffer = [];
    document.addEventListener('keydown', (e) => {
      keyBuffer.push(e.key.toUpperCase());
      if (keyBuffer.length > config.secretCode.length) {
        keyBuffer.shift();
      }
      
      if (keyBuffer.join('') === config.secretCode) {
        status.textContent = "DEVELOPER MODE ACTIVATED";
        vault.style.borderColor = "#ff00ff";
        playBeep(1000, 0.5);
        resetAttempts();
      }
    });

    scanner.addEventListener('dblclick', () => {
      if (isLocked) {
        deleteCookie('blocked');
        window.location.reload();
      }
    });

    bypassBtn.addEventListener('click', () => {
      resetAttempts();
      window.location.href = 'dashboard/index.html';
    });

    // ======================
    // üöÄ INITIALIZATION
    // ======================
    function init() {
      if (getCookie('blocked')) {
        window.location.href = 'whoareyou/index.html';
        return;
      }

      if (getAttemptCount() > 0) {
        bypassBtn.style.display = 'block';
      }

      fetch('https://api.ipify.org?format=json')
        .then(res => res.json())
        .then(data => {
          ipDisplay.textContent = `Your IP: ${data.ip}`;
        })
        .catch(() => {
          ipDisplay.textContent = 'Your IP: Unknown';
        });

      // Initialize audio on first interaction
      scanner.addEventListener('mousedown', initAudio, { once: true });
      scanner.addEventListener('touchstart', initAudio, { once: true });
    }

    init();
</script>
</body>
</html>
